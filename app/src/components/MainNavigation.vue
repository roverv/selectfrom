<template>
  <div class="main-navigation">

    <div class="px-5 py-2 text-center border-light-200 mb-4 ">
      <svg class="jsx-2263963463 artboard mx-auto" style="width: 70%; margin-bottom: 20px; ">
        <svg viewBox="0 -154.7928388746803 309.4260869565218 155.4066496163683" xmlns="http://www.w3.org/2000/svg"
             xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="jsx-2263963463 artboard-inner"
             style="width: 229px; height: 115.013px; max-height: 100%;">
          <g transform="translate(100.75272457223728 -161.74788977370451) scale(1.0526789050509207)" id="logomark">
            <g fill="#FFFFFF">
              <path
                  d="M23.706 41.28c7.597 1.779 17.713 2.866 28.828 2.866 17.174 0 31.972-2.592 38.769-6.329l2.217-14.813c-7.598 2.574-20.597 4.271-35.363 4.271-23.43 0-42.423-4.272-42.423-9.542 0-5.271 18.993-9.543 42.423-9.543 10.436 0 19.985.849 27.375 2.254-7.822-2.333-20.043-3.837-33.79-3.837C28.137 6.607 9 11.036 9 16.501c0 .134.021.267.043.4h-.004l2.959 19.773c1.459 1.119 3.61 2.157 6.315 3.082-3.398 1.329-5.356 2.877-5.356 4.532 0 .121.019.24.04.36h-.004l2.672 17.827c1.561 1.194 4 2.384 7.109 3.463-4.18 1.34-6.65 2.984-6.65 4.763 0 .11.018.22.036.33h-.004L18.6 85.218c4.674 3.578 17.887 8.27 33.47 8.27 14.18 0 25.871-3.191 31.481-6.271l2.359-13.794c-6.273 2.122-20.173 6.16-32.365 6.16-19.345 0-31.862-3.522-31.862-7.866 0-1.61 2.161-3.108 5.861-4.355 6.696 1.72 15.312 2.907 24.73 2.907 15.511 0 28.876-3.392 35.012-6.762l2.004-14.938c-6.861 2.321-18.602 5.435-31.937 5.435-21.161 0-38.315-3.852-38.315-8.604.001-1.494 1.693-2.897 4.668-4.12z"></path>
            </g>
          </g>
          <g transform="translate(-0.8593350383631715 0) scale(0.8525149190110828)" fill="#FFFFFF">
            <g id="line1">
              <path
                  d="M19.368 0.720C31.824 0.720 37.296-4.896 37.296-11.664C37.296-18.144 32.760-21.672 21.888-23.328C17.856-23.976 16.416-24.696 16.416-25.632C16.416-26.712 17.784-27.576 20.952-27.576C24.840-27.576 28.224-26.568 30.456-23.328L37.296-30.744C34.416-34.056 29.376-36.720 20.376-36.720C7.560-36.720 1.872-30.384 1.872-24.480C1.872-18.648 6.048-14.976 16.776-12.888C21.168-11.952 22.680-11.232 22.680-10.152C22.680-9.000 20.952-8.424 18.504-8.424C14.040-8.424 10.296-10.080 7.848-13.032L1.008-5.112C5.040-0.936 11.016 0.720 19.368 0.720Z"></path>
              <path
                  d="M76.831-18.864C76.831-29.736 70.423-36.720 58.183-36.720C45.871-36.720 38.815-29.880 38.815-18.000C38.815-6.120 45.799 0.720 58.975 0.720C67.543 0.720 74.239-2.592 76.111-9.288L64.375-12.672C63.727-10.440 61.927-9.216 58.975-9.216C55.519-9.216 53.431-10.440 52.783-14.688L76.471-14.688C76.687-15.624 76.831-17.424 76.831-18.864ZM58.255-26.856C61.279-26.856 62.719-24.840 63.223-21.024L52.783-21.024C53.359-25.200 55.087-26.856 58.255-26.856Z"></path>
              <path
                  d="M95.342-50.832L80.798-50.832L80.798-11.304C80.798-2.736 84.182 0.720 92.534 0.720C95.558 0.720 99.086-0.144 100.814-1.368L101.606-9.648C100.526-9.288 99.734-9.144 98.510-9.144C96.134-9.144 95.342-10.440 95.342-13.464Z"></path>
              <path
                  d="M139.990-18.864C139.990-29.736 133.582-36.720 121.342-36.720C109.030-36.720 101.974-29.880 101.974-18.000C101.974-6.120 108.958 0.720 122.134 0.720C130.702 0.720 137.398-2.592 139.270-9.288L127.534-12.672C126.886-10.440 125.086-9.216 122.134-9.216C118.678-9.216 116.590-10.440 115.942-14.688L139.630-14.688C139.846-15.624 139.990-17.424 139.990-18.864ZM121.414-26.856C124.438-26.856 125.878-24.840 126.382-21.024L115.942-21.024C116.518-25.200 118.246-26.856 121.414-26.856Z"></path>
              <path
                  d="M161.957-36.720C149.645-36.720 142.517-29.880 142.517-18.000C142.517-6.120 149.501 0.720 162.677 0.720C173.621 0.720 179.741-4.320 180.173-10.440L167.141-14.544C166.709-11.160 165.341-9.288 162.605-9.288C159.293-9.288 157.133-11.160 157.133-17.856C157.133-24.264 158.933-26.712 162.677-26.712C165.197-26.712 166.637-24.840 166.781-20.880L180.245-24.984C179.597-30.816 175.205-36.720 161.957-36.720Z"></path>
              <path
                  d="M210.636-10.368C209.268-9.576 207.828-9.144 205.812-9.144C202.788-9.144 201.276-10.440 201.276-13.824L201.276-25.992L211.140-25.992L211.140-36.000L201.276-36.000L201.276-47.880L186.732-43.848L186.732-36.000L180.900-36.000L180.900-25.992L186.732-25.992L186.732-11.520C186.732-2.592 191.916 0.720 201.132 0.720C204.804 0.720 209.196-0.288 211.572-1.872Z"></path>
            </g>
          </g>
          <g transform="translate(182.59437340153457 0) scale(0.8525149190110826)" fill="#FFFFFF">
            <g id="line2">
              <path
                  d="M10.512-41.832C10.512-47.664 13.536-50.976 18.576-50.976C20.736-50.976 22.104-50.472 23.400-49.104L24.120-50.832C22.896-52.056 21.168-52.920 18.432-52.920C12.024-52.920 8.352-48.744 8.352-41.976L8.352-36.000L1.152-36.000L1.152-34.128L8.352-34.128L8.352 0L10.512 0L10.512-34.128L23.616-34.128L23.616-36.000L10.512-36.000Z"></path>
              <path
                  d="M42.847-36.720C37.087-36.720 32.839-32.904 31.111-27.576L30.895-36.000L29.023-36.000L29.023 0L31.183 0L31.183-20.592C31.183-28.224 36.151-34.776 42.343-34.776C44.863-34.776 46.015-34.200 46.951-33.336L47.743-35.208C46.663-36.144 45.151-36.720 42.847-36.720Z"></path>
              <path
                  d="M65.750-36.720C55.238-36.720 48.758-29.664 48.758-18.000C48.758-6.336 55.238 0.720 65.750 0.720C76.262 0.720 82.670-6.336 82.670-18.000C82.670-29.664 76.262-36.720 65.750-36.720ZM65.750-34.848C74.966-34.848 80.510-28.512 80.510-18.000C80.510-7.488 74.966-1.152 65.750-1.152C56.606-1.152 50.918-7.488 50.918-18.000C50.918-28.512 56.606-34.848 65.750-34.848Z"></path>
              <path
                  d="M135.310-36.864C128.398-36.864 122.566-32.904 120.766-27.144C119.470-33.408 114.430-36.720 107.662-36.720C101.038-36.720 95.566-33.120 93.478-27.576L93.406-36.000L91.390-36.000L91.390 0L93.550 0L93.550-21.168C93.550-28.944 99.742-34.848 107.374-34.848C114.430-34.848 118.966-30.744 118.966-23.328L118.966 0L121.126 0L121.126-21.384C121.126-28.872 127.174-34.920 135.022-34.920C142.006-34.920 146.614-30.888 146.614-23.400L146.614-0.144L148.774-0.144L148.774-23.688C148.774-32.184 143.302-36.864 135.310-36.864Z"></path>
            </g>
          </g>
        </svg>
      </svg>

    </div>

    <div class="flex flex-col flex-wrap py-3 px-5">

      <div class="w-full">

        <div class="flex items-center mb-1">
          <router-link :to="{ name: 'server'}" class="btn-link ">
            Databases
          </router-link>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 fill-current text-gray-400"
               style="transform: rotate(90deg);">
            <path
                d="M8.7 13.7a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L12 10.42l-3.3 3.3z"></path>
          </svg>
        </div>

        <div class="flex items-center mb-1" v-if="active_database">
          <router-link :to="{ name: 'database', params: {database: active_database }}" class="btn-link">
            {{ active_database }}
          </router-link>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 fill-current text-gray-400"
               style="transform: rotate(90deg);">
            <path
                d="M8.7 13.7a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L12 10.42l-3.3 3.3z"></path>
          </svg>
        </div>

        <div class="flex items-center mb-1 " v-if="active_database && $route.params.hasOwnProperty('tableid')">
          <router-link :to="{ name: 'table', params: {database: active_database, tableid: $route.params.tableid }}" class="btn-link">
            {{ $route.params.tableid }}
          </router-link>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 fill-current text-gray-400"
               style="transform: rotate(90deg);">
            <path
                d="M8.7 13.7a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L12 10.42l-3.3 3.3z"></path>
          </svg>
        </div>

      </div>

      <hr class="border-light-200 my-3">

      <div class="w-full">
        <router-link :to="{ name: 'query' }" class="btn-link">
          Query
        </router-link>
<!--        <router-link :to="{ name: 'query' }" class="btn-link">-->
<!--          Search-->
<!--        </router-link>-->
<!--        <router-link :to="{ name: 'query' }" class="btn-link">-->
<!--          Import-->
<!--        </router-link>-->
<!--        <router-link :to="{ name: 'query' }" class="btn-link">-->
<!--          Export-->
<!--        </router-link>-->
      </div>

      <hr class="border-light-200 my-3">

      <div class="w-full mb-8">
        <a @click="refreshCache()" class="btn-link">
          Refresh cache
        </a>
        <a @click="refreshPage()" class="btn-link">
          Refresh page
        </a>
        <router-link :to="{ name: 'settings' }" class="btn-link">
          Settings &amp; help
        </router-link>
        <a href="" class="btn-link">
          Logout
        </a>
      </div>
    </div>

  </div>
</template>


<script>

export default {
  name: 'MainNavigation',

  data() {
    return {}
  },

  computed: {
    active_database() {
      return this.$store.state.activeDatabase;
    },
  },

  methods: {

    refreshCache() {
      this.$store.dispatch('refreshTables')
      this.$store.dispatch('refreshDatabases')
    },

    refreshPage() {
      this.$store.state.reloadMainComponentKey += 1;
    }

  },
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

.main-navigation {
  @apply border-r border-light-100 z-40 w-56 h-full absolute;
  margin-left: -215px;
}

.main-navigation:hover {
  @apply ml-0 bg-dark-400 border-0;
  transition: all 0.3s ease;
}

.btn-link {
  @apply block w-full py-1;
}

</style>
